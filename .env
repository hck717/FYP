# ============================================================================
# AgenticAnalyst - Unified Environment Configuration
# Works with: docker-compose.yml + Airflow DAGs
# ============================================================================

# ----------------------------------------------------------------------------
# Project Settings
# ----------------------------------------------------------------------------
PROJECT_NAME=AgenticAnalyst
AIRFLOW_UID=50000
ENVIRONMENT=development

# ----------------------------------------------------------------------------
# Postgres Credentials (Airflow Metadata DB + Structured Financial Data)
# ----------------------------------------------------------------------------
POSTGRES_USER=airflow
POSTGRES_PASSWORD=airflow
POSTGRES_DB=airflow
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# ----------------------------------------------------------------------------
# Financial Data API Keys (Used by DAGs)
# ----------------------------------------------------------------------------
# FMP Ultimate - Get key at: https://financialmodelingprep.com/developer/docs/
FMP_API_KEY=6kqjitcYPxyr60Xy1Jfem92Q1z9LfCHM

# EODHD All-in-One - Get key at: https://eodhd.com/
EODHD_API_KEY=6957671cac2858.27368157

# FRED Economic Data - Get key at: https://fred.stlouisfed.org/docs/api/api_key.html
FRED_API_KEY=demo

# ----------------------------------------------------------------------------
# Social Media APIs (Optional)
# ----------------------------------------------------------------------------
REDDIT_CLIENT_ID=demo
REDDIT_CLIENT_SECRET=demo
REDDIT_USER_AGENT=AgenticAnalyst/1.0

# ----------------------------------------------------------------------------
# Vector Database (Qdrant)
# ----------------------------------------------------------------------------
QDRANT_HOST=qdrant
QDRANT_PORT=6333
QDRANT_COLLECTION_NAME=financial_documents

# ----------------------------------------------------------------------------
# Graph Database (Neo4j) - For CRAG Architecture
# ----------------------------------------------------------------------------
NEO4J_HOST=neo4j
NEO4J_PORT=7687
NEO4J_HTTP_PORT=7474
NEO4J_USER=neo4j
NEO4J_PASSWORD=changeme_neo4j_password
NEO4J_URI=bolt://neo4j:7687

# ----------------------------------------------------------------------------
# LLM Configuration (Ollama on Mac M3 Host)
# ----------------------------------------------------------------------------
OLLAMA_HOST=host.docker.internal
OLLAMA_PORT=11434
OLLAMA_BASE_URL=http://host.docker.internal:11434
LLM_MODEL_BUSINESS_ANALYST=llama3.2:latest
LLM_MODEL_QUANTITATIVE=llama3.2:latest
LLM_MODEL_FINANCIAL_MODELING=llama3.2:latest
EMBEDDING_MODEL=nomic-embed-text:latest
EMBEDDING_DIMENSION=768

# ----------------------------------------------------------------------------
# Airflow Configuration
# ----------------------------------------------------------------------------
AIRFLOW__CORE__EXECUTOR=LocalExecutor
AIRFLOW__CORE__DAGS_ARE_PAUSED_AT_CREATION=true
AIRFLOW__CORE__LOAD_EXAMPLES=false
AIRFLOW__CORE__ENABLE_XCOM_PICKLING=true
AIRFLOW__DATABASE__SQL_ALCHEMY_CONN=postgresql+psycopg2://airflow:airflow@postgres/airflow
AIRFLOW_WWW_USER_USERNAME=admin
AIRFLOW_WWW_USER_PASSWORD=admin

# Airflow secret key (generate with: python -c "import secrets; print(secrets.token_hex(32))")
AIRFLOW__WEBSERVER__SECRET_KEY=changeme_random_secret_key_here

# ----------------------------------------------------------------------------
# Agent-Specific Settings (Used by DAGs)
# ----------------------------------------------------------------------------
# Business Analyst Agent (CRAG)
BUSINESS_ANALYST_MAX_CHUNKS=500
BUSINESS_ANALYST_CHUNK_SIZE=512
BUSINESS_ANALYST_OVERLAP=50

# Quantitative Fundamental Agent (Chain-of-Table)
QUANT_AGENT_SQL_TIMEOUT=30
QUANT_AGENT_VERIFICATION_THRESHOLD=0.01

# Financial Modeling Agent
FIN_MODEL_DCF_DISCOUNT_RATE=0.10
FIN_MODEL_TERMINAL_GROWTH_RATE=0.03

# ----------------------------------------------------------------------------
# Data Ingestion Settings (Used by DAGs)
# ----------------------------------------------------------------------------
# Tracked tickers (comma-separated, no spaces)
TRACKED_TICKERS=AAPL,MSFT,GOOGL,TSLA,NVDA

# Rate limiting (requests per minute)
FMP_RATE_LIMIT=300
EODHD_RATE_LIMIT=1000

# Data retention
DATA_RETENTION_DAYS=365

# ----------------------------------------------------------------------------
# Logging & Monitoring
# ----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=json

# ----------------------------------------------------------------------------
# Security & Secrets
# ----------------------------------------------------------------------------
JWT_SECRET_KEY=changeme_jwt_secret_key_here

# ----------------------------------------------------------------------------
# Development Settings
# ----------------------------------------------------------------------------
DEBUG=true
HOT_RELOAD=true
